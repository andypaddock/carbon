<style>
  body {
        padding: 0;
        margin: 0;
        background-color: #2f2e2c;
    }
    .hero {
        overflow: clip;
        position: relative;
    }
.block {
  color:white;
  padding: 3rem 2rem 3rem 0;
  font-family: 'lato',san-serif;
  font-size:18px;
  height: 75vh;
}

    .container {
  display: grid;
  grid-template-columns:
    [full-start] minmax(6rem, 1fr)
    [center-start] repeat(12, [col-start] minmax(min-content, 10rem) [col-end])
    [center-end] minmax(6rem, 1fr)
    [full-end];
}
.row {
  grid-column: col-start 2 / col-end 11;
  z-index: 4;
  display: grid;
  grid-template-columns: 1fr 1fr;
  position: relative;
}

    .left-col {
        height: 400vh;
    }

    .right-col {
     
    }
     .change-me {
        position:sticky;
      top:5rem;
      }

    .base-video {
        position: fixed;
        bottom: 0;
        width: 100%;
        background-color: #ccc;
z-index: 1;
      filter:grayscale(1);
      opacity:0.4;
    }
    video {
        width: 100%;
    }

    .panel-one {
        height: 100vh;
        background-color: #f2f2f2;
        padding: 20px;
    }
    .cloud-one,
.cloud-two {
  position: absolute;
  top: -100px;
  left: 50%;
  transform: translateX(-50%);
  width: 100%;
  height: 100px;
  animation: cloudAnimation 10s infinite linear;
 
}
.cloud-two  img {
    width: 100%;
  }

.cloud-two {
  top: 100vh;
  animation-delay: 5s;
 
}
.cloud-one {
  top: 5vh;
  opacity:0.5;
}

.sock-trigger {
      position: absolute;
      top: 50%; /* Position the trigger in the middle vertically */
      left: 0;
      transform: translate(-50%, -50%); /* Center the trigger horizontally */
      background-color: #fff;
      padding: 10px;
    }
</style>

<section class="hero">
    <div class="container">
        <div class="row">
            <div class="left-col">
                <div id="block-one" class="block block-one">The CHRP’s uniqueness lies in its constituent partners, each of which
                    contributes specific important resources and
                    expertise. While some partners have long-standing, ground-based operations within the landscape,
                    other partners offer
                    more technical, political and governance expertise.</div>
                <div id="block-two" class="block block-two">The CHRP’s uniqueness lies in its constituent partners, each of which
                    contributes specific important resources and
                    expertise. While some partners have long-standing, ground-based operations within the landscape,
                    other partners offer
                    more technical, political and governance expertise.</div>
                <div id="block-three" class="block block-three">The CHRP’s uniqueness lies in its constituent partners, each of which
                    contributes specific important resources and
                    expertise. While some partners have long-standing, ground-based operations within the landscape,
                    other partners offer
                    more technical, political and governance expertise.</div>
                <div id="block-four" class="block block-four">The CHRP’s uniqueness lies in its constituent partners, each of which
                    contributes specific important resources and
                    expertise. While some partners have long-standing, ground-based operations within the landscape,
                    other partners offer
                    more technical, political and governance expertise.</div>
                <div id="block-five" class="block block-five">The CHRP’s uniqueness lies in its constituent partners, each of which
                    contributes specific important resources and
                    expertise. While some partners have long-standing, ground-based operations within the landscape,
                    other partners offer
                    more technical, political and governance expertise.</div>
            </div>
            <div class="right-col">
                
                <div class="change-me"><div class="sock-trigger">TRIGGER</div><img src="http://carbon-project.local/wp-content/uploads/2023/07/shel.png"></div>
            </div>
        </div>

    </div>
    <div class="cloud-two">
        <img src="http://carbon-project.local/wp-content/uploads/2023/07/cloud1.png">
    </div>
    <div class="cloud-one">
        <img src="http://carbon-project.local/wp-content/uploads/2023/07/cloud2.png">
    </div>
    <div class="base-video">
        <video id="intro" tabindex="0" autobuffer="autobuffer" preload="preload"
            src="https://noiseless-dinner.mysites.io/wp-content/uploads/2023/07/359-30seconds.mp4" muted>

        </video>
    </div>
</section>
<section class="panel-one">
    <div class="container">
        <div class="row">
            Next element
        </div>
    </div>
</section>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollTrigger.min.js"></script>
<script>
      // When the page is fully loaded
        window.addEventListener('load', function () {
            // Select the necessary elements
            const videoElement = document.querySelector('.base-video');
            const panelOneSection = document.querySelector('.panel-one');
            const videoFile = document.getElementById('intro');

            // Set initial state of the video element
            // gsap.set(videoElement, { position: 'fixed', bottom: 0 });

            // Create the ScrollTrigger
            gsap.registerPlugin(ScrollTrigger);

            // Add ScrollTrigger animation
            gsap.to(videoElement, {
                scrollTrigger: {
                    trigger: panelOneSection,
                    start: 'top bottom', // Start the animation when panel-one section enters the viewport
                    end: 'bottom bottom', // End the animation when panel-one section leaves the viewport
                    onEnter: () => {
                        videoElement.style.position = 'absolute'; // When panel-one section enters the viewport, remove fixed positioning
                        gsap.to(videoElement, { filter: 'grayscale(0)', opacity: 1, duration: 2 }); // Change grayscale to 0 when entering
                    },
                    onLeaveBack: () => {
                        videoElement.style.position = 'fixed'; // When panel-one section leaves the viewport, revert to fixed positioning
                        gsap.to(videoElement, { filter: 'grayscale(1)', opacity: 0.6, duration: 2 }); // Change grayscale back to 1 when leaving
                    },
                },
            });

            gsap.to(videoFile, {
                scrollTrigger: {
                    trigger: panelOneSection,
                    start: 'top bottom',
                    onEnter: () => videoFile.play(), // Play the video when the trigger enters the viewport
                    onLeaveBack: () => videoFile.pause(), // Pause the video when the trigger leaves the viewport
                    onEnterBack: () => videoFile.play(), // Resume playing the video when the trigger re-enters the viewport
                },
            });

            gsap.to(".cloud-one", {
                scrollTrigger: {
                    trigger: ".hero",
                    start: "top center",
                    end: "bottom center",
                    scrub: true
                },
                y: 200,
                // Adjust the value to control the cloud's movement
                scale: 1.9, // Adjust the value to control the cloud's scaling
                opacity: 1,
            });

            gsap.to(".cloud-two", {
                scrollTrigger: {
                    trigger: ".hero",
                    start: "top center",
                    end: "bottom center",
                    scrub: true
                },
                y: 500,
                // Adjust the value to control the cloud's movement
                scale: 2.4 // Adjust the value to control the cloud's scaling
            });

              // Select the elements
            const blocks = document.querySelectorAll('.block');
            const changeMe = document.querySelector('.change-me');
            const sockTrigger = document.querySelector('.sock-trigger');

            // Loop through each block
            blocks.forEach(block => {
                // Get the ID of the block
                const blockId = block.getAttribute('id');

                // Create a ScrollTrigger for each block
                gsap.registerPlugin(ScrollTrigger);
                gsap.to(block, {
                    scrollTrigger: {
                        trigger: sockTrigger,
                        start: () => `top center+=${block.offsetHeight / 2}`,
                        end: () => `bottom center-=${block.offsetHeight / 2}`,
                        onEnter: () => changeMe.classList.add(blockId),
                        onLeaveBack: () => changeMe.classList.remove(blockId),
                    },
                });

                // Create a ScrollTrigger for the end of each block
                gsap.to(block, {
                    scrollTrigger: {
                        trigger: block,
                        start: () => `top center+=${block.offsetHeight}`, // Set the start trigger at the bottom of each block
                        end: () => `bottom center-=0`, // Set the end trigger at the top of each block
                        onEnter: () => changeMe.classList.remove(blockId), // Remove the class when the block enters the trigger
                        onLeaveBack: () => changeMe.classList.add(blockId), // Add the class when the block leaves the trigger
                    },
                });
            });

        });
</script>